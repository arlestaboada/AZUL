<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/plantillas/plantillaPrincipal.xhtml">
	<ui:define name="contenido">
		<f:view>
			
        <h:form id="formBusquedaUsuario">
                

                <p:panel id="pnlListarUsuario"
                        header="Lista de Usuario" 
                        style="width: 100%;margin: 10px auto" visible="true"
                        widgetVar="listaUsuario">
                    
                         <div align="right">       

                            <p:commandButton id="btnNuevoUsuario"
                                           action="#{MBUsuario.nuevo()}" value="Nuevo Usuario" ajax="false" />
                         </div>
                    
                        <p:dataTable id="dataTablaRegistros" var="registro"
                                     value="#{BKUsuario.listaUsuarios}" widgetVar="lista"
                                     emptyMessage="No se encontraron registros"                                   
                                     rowIndexVar="rowIndex" 
                                     paginator="true" 
                                     rows="10"
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} 
                                     {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="5,10,15">

                                <p:column id="idColumnaNum" style="width: 5%">
                                    <f:facet name="header">  
                                        <h:outputText value="Num" />  
                                    </f:facet>  
                                        <h:outputText value="#{rowIndex+1}" />
                                </p:column>

                                <p:column id="idColumnaInstitucion" style="width: 10%" sortBy="#{registro.idInstitucion.sigla}" filterBy="#{registro.sigla}">
                                     <f:facet name="header">  
                                        <h:outputText value="InstituciÃ³n" />  
                                    </f:facet>  
                                <h:outputText value="#{registro.idInstitucion.sigla}" />
                                </p:column>
                            
                             <p:column id="idColumnaCargo" style="width: 10%"  >
                                      <f:facet name="header">  
                                            <h:outputText value="Cargo" />  
                                        </f:facet>
                                      <h:outputText value="#{registro.cargo}" />
                                </p:column>
                            
                              <p:column id="idColumnaOficina" style="width: 10%"  >
                                      <f:facet name="header">  
                                            <h:outputText value="Direccion/Oficina" />  
                                        </f:facet>
                                        <h:outputText value="#{registro.oficina}" />
                                </p:column>
                            
                                <p:column id="idColumnaUsername" style="width: 10%" sortBy="#{registro.usuario}" filterBy="#{registro.usuario}">
                                     <f:facet name="header">  
                                        <h:outputText value="Username" />  
                                    </f:facet>  
                                     <h:outputText value="#{registro.usuario}" />
                                </p:column>

                                <p:column id="idColumnaNombres" style="width: 10%" sortBy="#{registro.nombres}" filterBy="#{registro.nombres}">
                                         <f:facet name="header">  
                                            <h:outputText value="Nombres" />  
                                        </f:facet>
                                        <h:outputText value="#{registro.nombres}" />
                                </p:column>

                                <p:column id="idColumnaApellidos" style="width: 10%" filterBy="#{registro.apellidos}" >
                                      <f:facet name="header">  
                                            <h:outputText value="Apellidos" />  
                                        </f:facet>
                                    <h:outputText value="#{registro.apellidos}"  />
                                </p:column>
                            
                              <p:column id="idColumnaCorreo" style="width: 10%"  >
                                      <f:facet name="header">  
                                            <h:outputText value="Correo" />  
                                        </f:facet>
                                  <h:outputText value="#{registro.correo}" />
                                </p:column>
                                                       
                                                     
                            
                              <p:column id="idColumnaRol" style="width: 10%"  >
                                      <f:facet name="header">  
                                            <h:outputText value="Rol" />  
                                        </f:facet>
                                  <h:outputText value="#{registro.idRol.descripcion}" />
                                </p:column>
                            
                            <p:column id="idColumnaEstado" style="width: 7.5%" sortBy="#{registro.estadoRegistro}" >
                                       <f:facet name="header">  
                                            <h:outputText value="Estado" />  
                                        </f:facet>
                                <h:outputText value="#{registro.estadoRegistro}" />
                                </p:column>

                               
                             <p:column id="idColumnaOpciones" style="width: 7.5%"  headerText="Opciones" exportable="false">                              
                                 <p:commandButton id="btnEditar" icon="ui-icon-pencil" title="#{message['general.button.editar']}" action="#{MBUsuario.editar()}" immediate="true" ajax="false">
                                     <f:setPropertyActionListener value="#{registro}" target="#{BKUsuario.usuarioSeleccionado}" />  
                                </p:commandButton>   
                                 <p:commandButton id="btnContracena" icon="ui-icon-key" title="#{message['general.button.clave']}" action="#{MBUsuario.editarContracena()}"  ajax="false">
                                     <f:setPropertyActionListener value="#{registro}" target="#{BKUsuario.usuarioSeleccionado}" />  
                                </p:commandButton>   
                            </p:column>


                        </p:dataTable>
                </p:panel>
            
                  
                   
        </h:form>
		</f:view>
	</ui:define>
</ui:composition>

</html>
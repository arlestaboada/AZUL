<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions">

    <h:head>
        <f:facet name="first">
            <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
        </f:facet>

        <f:loadBundle basename="pe.gob.minam.configuracion.Mensajes" var="message" />

        <title>CVERDE-POSTULARSE</title>   


        <link type="text/css" rel="stylesheet" href="#{request.contextPath}/recursos/css/default.css" />
        <link type="text/css" rel="stylesheet" href="#{request.contextPath}/recursos/css/biodiversidad.css" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>

        <link href="#{facesContext.externalContext.requestContextPath}/resources/css/default.css" rel="stylesheet" type="text/css" />
        <link href="#{facesContext.externalContext.requestContextPath}/resources/css/ui.css" rel="stylesheet" type="text/css" />	
        <link href="#{facesContext.externalContext.requestContextPath}/resources/css/general.css" rel="stylesheet" type="text/css" />	
        <script src="#{facesContext.externalContext.requestContextPath}/resources/js/utils.js" type="text/javascript" />
        <script src="http://maps.google.com/maps/api/js?sensor=false&amp;v=4.0" type="text/javascript" />
        <script type="text/javascript">
            window.history.forward();
            function noBack() {
                window.history.forward();
            }
        </script>

        <script type="text/javascript" src="#{request.contextPath}/recursos/js/FixedColumns.js" />
        <script type="text/javascript" src="#{request.contextPath}/recursos/js/FixedColumns.min.js" />
        <script type="text/javascript" src="#{request.contextPath}/recursos/js/script.js" />
        <script type="text/css" rel="stylesheet" href="#{request.contextPath}/recursos/js/misJs.js" />


        <style>
            .tablaSinBorde tr, .tablaSinBorde td {
                border-style: hidden !important;
            }
            .ui-message-error{
                display: inline !important;
            }
            ui-panelgrid,.ui-panelgrid-cell {
                border-width: 0px !important;
                border-style: solid;
                border-color: inherit;
                padding: 4px 10px;
            }

            #headerLogin {
                clear: both;
                display: inline-block;
                width: 100%;
                position : absolute;
                top :0;
                height : 15%;
                margin-top : auto;
                background-color:#76B82A;
                background-size: 60% 100%;
                background-repeat: repeat;
                padding: 0px;
                margin: 0px;  
                top: 0;
                background-color: #76B82A;
                z-index:99;
                width: 100%;
                -moz-box-shadow:0 1px 5px #999;
                -webkit-box-shadow: 0 1px 5px #999;
                box-shadow: 0 1px 5px #999;
                padding-top:10px;
                padding-bottom:10px;

            }

            #headerBanner1 {
                clear: both;
                display: inline-block;
                width:100%;
                position : absolute;
                top :0px;
                left: 0px;
                height : 100%;
                margin-top : auto;
                padding: 0px;
                margin: 0px;             
            }

            #headerBanner2 {
                clear: both;
                display: inline-block;
                width: 100%;
                position : absolute;
                top :0px;
                right: 0px;
                height : 100%;
                margin-top : auto;
                padding: 0px;
                margin: 0px;             
            }

            #blanco {
                clear: both;
                display: inline-block;
                width: 100%;
                position : absolute;
                top :100px;
                height : 45px;
                margin-top : auto;

                background-size: 100% 100%;
                background-repeat: repeat;
                padding: 0px;
                margin: 0px;             
            }
            #cien{
                width: 100%;
            }

            .ui-radiobutton .ui-radiobutton-box {
               background: white;
            }


        </style>


    </h:head>
    <h:body onload="noBack();"  class="home blog" >   

        <f:view>

            <h:form id="frmGral" prependId="false"  enctype="multipart/form-data">

                <div id="headerLogin">
                    <div class="container">
                        <div class="row">
                            <div class="col-xs-3">
                                <div id="headerBanner1"  align="right">  
                                    <h:graphicImage class="img-responsive" value="../public/img/Logo-MINAM.png"  />
                                </div>
                            </div>
                            <div class="col-xs-9">
                                <div id="headerBanner2" align="center">        
                                    <h:graphicImage id="cien" class="img-responsive" value="/recursos/imagenes/nuevoLogin/cabecera-sin-fondo.png"  width="800px" height="120px"/>
                                </div>
                            </div>  
                        </div>  
                    </div>
                    <div id="blanco">
                        <div class="container">
                            <div class="row">
                                <div class="col-xs-12">
                                    <div id="headerLogin2">
                                    </div>  
                                </div>
                            </div>
                        </div>
                    </div>  
                </div>

                <div id="divCapaMadre">
                   
                    <div id="divPnlContenido" style="position: absolute; top: 130px">
                        <h:panelGrid id="pnlContenido"  columns="1" width="1300px" border="0">   
                            <p:messages id="msgs" showDetail="false"  autoUpdate="true" closable="true" globalOnly="true"/>

                            <p:growl id="growl" showDetail="true" life="5000"/>

                            <p:panelGrid id="gridBasicData" columns="2" columnClasses="columnPhoto, column80" styleClass="tableTotal">	

                                <f:facet name="header">
                                    <h:outputText value="Formulario de Inscripción" />
                                </f:facet>

                                <p:panel id="pnlPhoto" widgetVar="_pnlPhoto">            
                                    <p:panelGrid columns="1" styleClass="tableFoto" id="gridPhoto">
                                        <p:graphicImage id="imgProfile" value="#{MBPostulantes.file}" height="200" width="200"
                                                        cache="false"/>

                                        <p:commandButton value="Seleccione foto" styleClass="textLabel9" update="pnlPhoto"
                                                         onclick="PF('_dlgLoadPhoto').show();" icon="ui-icon-image" />					
                                    </p:panelGrid>	
                                </p:panel>					

                                <p:panel id="pnlInfoBasic" widgetVar="_pnlInfoBasic">
                                    <p:panelGrid columns="1"  styleClass="tableTotal"
                                                 style="text-align: center;">

                                        <p:panelGrid columns="1" styleClass="tableTotal">

                                            <p:panelGrid columns="1" styleClass="tableMediumTotal" >

                                                <f:facet name="header">
                                                    <h:outputText value="Categorias a la que postulas" />
                                                </f:facet>
                                                <p:selectOneRadio  id="cmbCategoria" value="#{BKPostulante.postulante.categoria}" layout="grid" columns="3">
                                                    <f:selectItem itemLabel="A: Niños y niñas de 7 a 11 años" itemValue="1" />
                                                    <f:selectItem itemLabel="B: Adolecentes de 12 a 17 años" itemValue="2" />
                                                    <f:selectItem itemLabel="C: Jóvenes de 18 a 22 años" itemValue="3" />
                                                    <p:ajax update="frmGral:txtApoderado"  process="@this,cmbCategoria" immediate="true"/>
                                                </p:selectOneRadio >

                                            </p:panelGrid>



                                            <p:separator style="height:2px;"/>	


                                            <p:panelGrid  styleClass="tableMediumTotal">	


                                                <p:row>
                                                    <p:column colspan="2">
                                                        <p:outputLabel value="Tus Datos:"/>
                                                    </p:column>                                   
                                                </p:row>

                                                <p:row>
                                                    <p:column colspan="2">
                                                        <p:spacer height="10px"/>
                                                    </p:column>                                   
                                                </p:row>

                                                <p:row>
                                                    <p:column rowspan="3" style="width: 200px">                                    
                                                        <h:graphicImage id="imgUbigeo" value="/recursos/imagenes/icon/2.png" height="80px" width="55px"/> 
                                                    </p:column>                                   
                                                </p:row>

                                                <p:row>                                       
                                                    <p:column style="width: 100%">
                                                        <p:inputText id="txtNombres" value="#{BKPostulante.postulante.nombres}" styleClass="textLabel12" 
                                                                     style="width: 100%" required="true" maxlength="50"
                                                                     requiredMessage="Campo nombres es requerido." onkeypress="return filterInput(0, event, false, '');">
                                                            <p:watermark for="txtNombres" value="Nombres" />
                                                        </p:inputText>
                                                        <p:tooltip for="txtNombres" value="Nombres" showEffect="fade" hideEffect="fade" />
                                                    </p:column>
                                                </p:row> 

                                                <p:row>
                                                    <p:column style="width: 100%">
                                                        <p:inputText id="txtApellidos" value="#{BKPostulante.postulante.apellidos}" styleClass="textLabel12" 
                                                                     style="width: 100%" required="true" maxlength="50"
                                                                     requiredMessage="Campo apellidos es requerido." onkeypress="return filterInput(0, event, false, '');">
                                                            <p:watermark for="txtApellidos" value="Apellidos" />
                                                        </p:inputText>
                                                        <p:tooltip for="txtApellidos" value="Apellidos" showEffect="fade" hideEffect="fade" />

                                                    </p:column>

                                                </p:row>

                                            </p:panelGrid>


                                            <p:panelGrid styleClass="tableMediumTotal">

                                                <p:row>
                                                    <p:column style="width: 80px">
                                                        <h:graphicImage id="imgDNI" value="/recursos/imagenes/icon/3.png" height="50px" width="80px"/> 
                                                    </p:column>
                                                    <p:column style="width: 200px">
                                                        <p:inputText id="txtDNI" label="DNI" value="#{BKPostulante.postulante.nrodni}" styleClass="textLabel12" 
                                                                     style="width: 200px" required="true"  onkeypress="return filterInput(1, event, false, '');"
                                                                     requiredMessage="Campo DNI es requerido." validatorMessage="El DNI no es válido."  maxlength="8" >
                                                            <f:validateLength  minimum="8"  />


                                                            <p:watermark for="txtDNI" value="DNI" />
                                                        </p:inputText>	
                                                        <p:tooltip for="txtDNI" value="DNI" showEffect="fade" hideEffect="fade"  />
                                                    </p:column>
                                                    <p:column>
                                                        <h:graphicImage id="imgGenero" value="/recursos/imagenes/icon/5.png" height="50px" width="60px"/> 
                                                    </p:column>
                                                    <p:column>
                                                        <p:selectOneRadio  id="cmbGenero" value="#{BKPostulante.postulante.genero}" layout="grid" columns="3">
                                                            <f:selectItem itemLabel="Masculino" itemValue="1" />
                                                            <f:selectItem itemLabel="Femenino" itemValue="2" />                                        
                                                        </p:selectOneRadio>
                                                    </p:column>
                                                </p:row>                                       



                                                <p:row>
                                                    <p:column style="width: 10%">
                                                        <h:graphicImage id="imgCumple" value="/recursos/imagenes/icon/4.png" height="60px" width="70px"/> 
                                                    </p:column>
                                                    <p:column style="width: 60%" >
                                                        <p:calendar id="calFechaNacimiento" value="#{BKPostulante.postulante.fechanac}"
                                                                    pattern="dd/MM/yyyy" 
                                                                    readonlyInput="true" locale="es" style="width: 30%" required="true"
                                                                    requiredMessage="Campo fecha de nacimiento es requerido."
                                                                    mindate="01/01/1992"  maxdate="31/12/2010" navigator="true" yearRange="c-20:c+20" showOn="button" onselect="calcularEdad(19 / 09 / 2010)">
                                                            <p:watermark for="calFechaNacimiento" value="Fecha de nacimiento" />
                                                        </p:calendar>		
                                                        <p:tooltip for="calFechaNacimiento" value="Fecha de nacimiento" showEffect="fade" hideEffect="fade" />
                                                    </p:column>
                                                    <p:column style="width: 100%" colspan="2">
                                                        <p:inputText id="txtEdad" value="#{BKPostulante.postulante.edad}" styleClass="textLabel12" 
                                                                     style="width: 100%" required="true" maxlength="2" onfocus="calcularEdad(19 / 09 / 2010)" onkeypress="return filterInput(1, event, false, '');"
                                                                     requiredMessage="Campo edad es requerido.">
                                                            <p:watermark for="txtEdad" value="Edad" />
                                                        </p:inputText>	
                                                        <p:tooltip for="txtEdad" value="Edad" showEffect="fade" hideEffect="fade" />
                                                    </p:column>
                                                </p:row>     




                                                <p:row>
                                                    <p:column style="width: 100%" colspan="4">
                                                        <p:inputText id="txtApoderado" value="#{BKPostulante.postulante.padretutor}" styleClass="textLabel12" 
                                                                     style="width: 100%" required="true" maxlength="50" 
                                                                     disabled="#{BKPostulante.postulante.categoria==3}"
                                                                     requiredMessage="Campo apoderado es requerido.">
                                                            <p:watermark for="txtApoderado" value="Nombres y apellidos de tu papá , mamá o tutor*." />
                                                        </p:inputText> 
                                                        <p:outputLabel value="*Sólo para categorias A y B"/>
                                                        <p:tooltip for="txtApoderado" value="Apoderado" showEffect="fade" hideEffect="fade" />
                                                    </p:column>
                                                </p:row>       

                                                <p:row>
                                                    <p:column colspan="5">
                                                        <p:spacer height="20px"/>
                                                        <p:separator style="height:2px;"/>	

                                                    </p:column>                                   
                                                </p:row>   

                                                <p:row>
                                                    <p:column style="width: 10%">
                                                        <h:graphicImage id="imgDireccion" value="/recursos/imagenes/icon/6.png" height="70px" width="70px"/> 
                                                    </p:column>
                                                    <p:column style="width: 90%" colspan="3">
                                                        <p:inputText id="txtDireccion" value="#{BKPostulante.postulante.direccion}" 
                                                                     style="width: 100%" required="true" requiredMessage="Campo dirección es requerido."
                                                                     maxlength="120">
                                                            <p:watermark for="txtDireccion" value="Dirección"/>
                                                        </p:inputText>
                                                        <p:tooltip for="txtDireccion" value="Dirección" showEffect="fade" hideEffect="fade" />                                                                      
                                                    </p:column>
                                                </p:row>   

                                                <p:row>
                                                    <p:column colspan="5">

                                                        <p:panelGrid  styleClass="tableMediumTotal" >
                                                            <p:row>
                                                                <p:column rowspan="4" style="width: 100px">                                    
                                                                    <h:graphicImage id="imgMapa" value="/recursos/imagenes/icon/10.png" height="110px" width="80px"/> 
                                                                </p:column>                                   
                                                            </p:row>
                                                            <p:row>                                                          
                                                                <p:column>
                                                                    <p:selectOneMenu id="cboDepartamento" required="true" 
                                                                                     value="#{BKPostulante.postulante.departamento}" style="width: 40%"
                                                                                     requiredMessage="Campo  departamento es requerido.">
                                                                        <f:selectItem itemLabel="Seleccione departamento" itemValue=""/>
                                                                        <f:selectItems value="#{BKPostulante.listaDepartamentos}" var="depa"
                                                                                       itemLabel="#{depa.nombre}" itemValue="#{depa.codigoDep}" />							
                                                                        <p:ajax listener="#{MBPostulantes.changeListDepartamentos()}" update="frmGral:cboProvincia"  />	
                                                                    </p:selectOneMenu>

                                                                </p:column>    

                                                            </p:row>
                                                            <p:row>                                                          
                                                                <p:column>

                                                                    <p:selectOneMenu id="cboProvincia" required="true" 
                                                                                     value="#{BKPostulante.postulante.provincia}" style="width: 40%"
                                                                                     requiredMessage="Campo  provincia es requerido.">
                                                                        <f:selectItem itemLabel="Seleccione provincia" itemValue=""/>
                                                                        <f:selectItems value="#{BKPostulante.listaProvincias}" var="prov"
                                                                                       itemLabel="#{prov.nombre}" itemValue="#{prov.codigoPro}" />					
                                                                        <p:ajax listener="#{MBPostulantes.changeListProvincias()}" update="frmGral:cboDistrito"  />	
                                                                    </p:selectOneMenu>

                                                                </p:column>    

                                                            </p:row>
                                                            <p:row>                                                          
                                                                <p:column>                                
                                                                    <p:selectOneMenu id="cboDistrito" required="true" 
                                                                                     value="#{BKPostulante.postulante.distrito}" style="width: 40%"
                                                                                     requiredMessage="Campo distrito es requerido.">
                                                                        <f:selectItem itemLabel="Seleccione distrito" itemValue=""/>
                                                                        <f:selectItems value="#{BKPostulante.listaDistritos}" var="dist"
                                                                                       itemLabel="#{dist.nombre}" itemValue="#{dist.codigoDis}" />
                                                                    </p:selectOneMenu>
                                                                </p:column>    

                                                            </p:row>

                                                        </p:panelGrid>
                                                    </p:column>                                   
                                                </p:row>

                                                <p:row>
                                                    <p:column style="width: 10%">
                                                        <h:graphicImage id="imgTelefono" value="/recursos/imagenes/icon/7.png" height="60px" width="40px"/> 
                                                    </p:column>
                                                    <p:column style="width: 90%" colspan="4">
                                                        <p:inputText id="txtTelephone" label="Teléfono" value="#{BKPostulante.postulante.telefonos}"
                                                                     style="width: 100%" required="true" requiredMessage="Campo teléfono es requerido." validatorMessage="Teléfono no válido"
                                                                     maxlength="9" onkeypress="return filterInput(1, event, false, '');">
                                                            <f:validateLength minimum="4"/>
                                                            <p:watermark for="txtTelephone" value="Teléfono / Celular"/>                                        
                                                        </p:inputText>
                                                        <p:tooltip for="txtTelephone" value="Teléfono / Celular" showEffect="fade" hideEffect="fade" />                                                                      
                                                    </p:column>
                                                </p:row>     

                                                <p:row>
                                                    <p:column style="width: 10%">
                                                        <h:graphicImage id="imgEmail" value="/recursos/imagenes/icon/8.png" height="50px" width="50px"/> 
                                                    </p:column>
                                                    <p:column style="width: 90%" colspan="4">
                                                        <p:inputText id="txtEmail" label="Email" value="#{BKPostulante.postulante.email}"
                                                                     style="width: 100%" required="true" requiredMessage="Campo email personal es requerido."         
                                                                     maxlength="120">
                                                            <p:watermark for="txtEmail"  value="Email personal  "/>
                                                            <f:validator validatorId="ValidaCorreo"/>
                                                        </p:inputText>
                                                        <p:tooltip for="txtEmail" value="Email personal / Institucional" showEffect="fade" hideEffect="fade" />     

                                                    </p:column>
                                                </p:row>   

                                            </p:panelGrid>



                                        </p:panelGrid>

                                        <p:panelGrid columns="2" styleClass="tableTotal" >

                                            <f:facet name="header">
                                                <h:outputText value="Ocupación" />
                                            </f:facet>

                                            <p:selectOneRadio  id="cmbOcupacion" value="#{BKPostulante.postulante.tipoocupacion}" layout="pageDirection" >
                                                <f:selectItem itemLabel="Estudio" itemValue="1" />
                                                <f:selectItem itemLabel="Trabajo" itemValue="2" />                                        
                                            </p:selectOneRadio>

                                            <p:panelGrid columns="1" >
                                                <p:inputText id="txtInstitucionEducativa" value="#{BKPostulante.postulante.instEducativa}"
                                                             style="width: 100%"  
                                                             maxlength="200" onkeypress="return filterInput(0, event, false, '');">
                                                    <p:watermark for="txtInstitucionEducativa" value="Institución Educativa"/>                                           
                                                </p:inputText>

                                                <p:inputText id="txtCentroLaboral" value="#{BKPostulante.postulante.centroLaboral}"
                                                             style="width: 100%"  
                                                             maxlength="200"  onkeypress="return filterInput(0, event, false, '');">
                                                    <p:watermark for="txtCentroLaboral" value="Centro Laboral" />                                           
                                                </p:inputText>
                                            </p:panelGrid>


                                        </p:panelGrid>

                                        <p:separator style="height:2px;" />

                                        <p:panel>
                                            <p:commandButton value="Grabar Información" action="#{MBPostulantes.guardar()}" process="@this,frmGral" 
                                                             icon="ui-icon-disk" update="frmGral:growl, frmGral:msgs" ajax="false"/>								

                                            <p:commandButton value="Cancelar" icon="ui-icon-closethick" action="#{MBPostulantes.cancelar()}" 
                                                             immediate="true" process="@this" />

                                        </p:panel>

                                    </p:panelGrid>
                                </p:panel>		
                            </p:panelGrid>





                        </h:panelGrid>
                    </div> 


                </div>

            </h:form>

            <p:ajaxStatus onstart="PF('statusDialog').show();" onsuccess="PF('statusDialog').hide();"/>  

            <p:dialog modal="true" widgetVar="statusDialog" appendTo="@(body)"
                      header="Procesando... Expere por favor !!" draggable="false" 
                      closable="false" resizable="false">  
                <p:graphicImage value="/resources/images/loadingbar.gif" />			    
            </p:dialog>

            <script type="text/javascript">
            function start() {
                statusDialog.show();
            }

            function stop() {
                statusDialog.hide();
            }
            </script>

            <p:dialog id="dlgLoadPhoto" widgetVar="_dlgLoadPhoto" modal="true" closable="false" 
                      resizable="true" header="Seleccione su fotográfia">
                <h:form id="frmLoadPhoto" enctype="multipart/form-data" >
                    <h:outputText value="Tamaño maximo del archivo es de 1MB" styleClass="textLabel10" />
                    <p:panelGrid id="gridLoadPhoto" columns="1" styleClass="tableTotal" >
                        <p:fileUpload uploadLabel="Cargar" cancelLabel="Cancelar" label="Buscar"
                                      mode="advanced" dragDropSupport="false" styleClass="textLabel9"
                                      sizeLimit="1048576" allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
                                     fileUploadListener="#{MBPostulantes.handleFileUpload}" 
                                     update=":frmGral" auto="true" oncomplete="PF('_dlgLoadPhoto').hide();" process="@this" /> 
                            
                        
                    
                    </p:panelGrid>
                    <p:separator />
                    <p:commandButton value="Salir" onclick="PF('_dlgLoadPhoto').hide();"/>
                </h:form>
            </p:dialog>

        </f:view>

        <!--footer empieza-->


        <!--footer termina-->
    </h:body>

</html>    